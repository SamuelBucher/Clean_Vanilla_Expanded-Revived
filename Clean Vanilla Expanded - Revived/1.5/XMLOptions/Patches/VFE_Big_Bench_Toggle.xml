<?xml version="1.0" encoding="utf-8"?>

<Patch>
	
	<!-- Large production benches toggle -->
	<Operation Class="XmlExtensions.OptionalPatch">
		<modId>SamBucher.CleanVE2</modId>
		<key>bigBenchToggle</key>
		<defaultValue>true</defaultValue>
		<caseTrue>
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/ThingDef[
				defName="VFE_TableMachiningLarge" or
				defName="VFE_TableSmithyLarge" or
				defName="VFE_TableStoveLarge" or
				defName="VFE_TableTailorLarge"]/designationCategory				</xpath>
			</Operation>
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/ThingDef[
				defName="VFE_TableMachiningLarge" or
				defName="VFE_TableSmithyLarge" or
				defName="VFE_TableStoveLarge" or
				defName="VFE_TableTailorLarge"]/researchPrerequisites				</xpath>
			</Operation>
		
			<!-- Connections.xml -->
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/WorkGiverDef[defName="DoBillsMakeApparel"]/fixedBillGiverDefs/li[text()="VFE_TableTailorLarge"]</xpath>
			</Operation>
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/WorkGiverDef[defName="DoBillsCook"]/fixedBillGiverDefs/li[text()="VFE_TableStoveLarge"]</xpath>
			</Operation>
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/WorkGiverDef[defName="DoBillsMakeWeapons"]/fixedBillGiverDefs/li[text()="VFE_TableSmithyLarge"]</xpath>
			</Operation>
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/WorkGiverDef[defName="DoBillsMachiningTable"]/fixedBillGiverDefs/li[text()="VFE_TableMachiningLarge"]</xpath>
			</Operation>

			<!-- ResearchProjects_Various.xml -->
			<Operation Class="XmlExtensions.PatchOperationSafeRemove">
				<xpath>/Defs/ResearchProjectDef[defName="VFE_Manufacturing"]</xpath>
			</Operation>
			
			<!-- Replace Stuff Mod Compatibility compatability -->
			<Operation Class="PatchOperationFindMod">
				<mods>
					<li>Replace Stuff Mod Compatibility</li>
				</mods>
				<match Class="PatchOperationSequence">
					<operations>
						<li Class="PatchOperationRemove">
							<xpath>Defs/Replace_Stuff_Compatibility.InterchangeableItems[defName="ReplaceStuffModCompat_VanillaFurnitureProduction"]/replaceLists/li[
							category="Smithys" or
							category="MachiningTables" or
							category="Stoves" or
							category="TailoringBenches"
							]
							</xpath>
						</li>
					</operations>
				</match>
			</Operation>
		</caseTrue>
	</Operation>
	
</Patch>